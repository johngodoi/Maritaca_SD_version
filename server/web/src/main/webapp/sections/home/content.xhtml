<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:util="http://java.sun.com/jsf/composite/components/util"
	xmlns:forms="http://java.sun.com/jsf/composite/components/forms"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j">
<h:form id="mainForm">
	<!-- TOP TABS -->
	<rich:tabPanel activeItem="#{manager.activeModule.id}"
		tabContentClass="tabContent" switchType="ajax"
		itemChangeListener="#{manager.processItemChange}" id="mainTab">
		<f:ajax execute="mainTab" event="click" />
		<c:forEach var="module" items="#{manager.enabledModules}">
			<!-- CREATE A NEW TOP TAB (MODULE) -->
			<rich:tab header="#{module.title}" id="#{module.id}">
				<!-- FOR EACH MODULE, CREATE A GRID PANEL FOR LEFT NAVIGATION BAR & CONTENT -->
				<h:panelGrid columns="2" columnClasses="cols,cols"
					id="#{module.id}_menuAndContent">
					<rich:panelMenu id="#{module.id}_panelLeftMenu"
						styleClass="menuLeft" activeItem="#{module.activeSubModule.id}">
						<!-- LEFT MENU -->
						<c:forEach var="subModule" items="#{module.subModules}">
							<rich:panelMenuItem label="#{subModule.title}"
								id="#{subModule.id}" actionListener="#{module.processAction}"
								render="panelContent" mode="ajax">
							</rich:panelMenuItem>
						</c:forEach>
					</rich:panelMenu>
					<rich:panel id="panelContent" bodyClass="panelContent">
						<!--  MAIN CONTENT -->
						<util:selectComponent submodule="#{module.activeSubModule}" />
					</rich:panel>
				</h:panelGrid>
			</rich:tab>
		</c:forEach>
	</rich:tabPanel>
</h:form>
</html>
