<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:composite="http://java.sun.com/jsf/composite"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:forms="http://java.sun.com/jsf/composite/components/forms"
	xmlns:util="http://java.sun.com/jsf/composite/components/util"
	xmlns:ft="http://facestrace.sourceforge.net">

	<h:outputScript name="default.js" library="javascript" />
	<h:outputScript name="jquery-ui-1.8.17.custom.js" library="javascript" />
	<h:outputStylesheet library="css" name="jquery-ui-1.8.17.custom.css" />
	<h:form id="mainForm">
		<!-- TOP TABS -->
		<rich:tabPanel activeItem="#{manager.activeModule.id}"
			tabContentClass="tabContent" switchType="ajax"
			itemChangeListener="#{manager.processItemChange}" id="mainTab">
			<c:forEach var="module" items="#{manager.enabledModules}">
				<!-- CREATE A NEW TOP TAB (MODULE) -->
				<rich:tab header="#{module.title}" id="#{module.id}">
					<!-- FOR EACH MODULE, CREATE A GRID PANEL FOR LEFT NAVIGATION BAR & CONTENT -->
					<c:if test="#{manager.activeModule.id == module.id}">
						<h:panelGrid columns="2" columnClasses="cols,cols"
							id="#{module.id}_menuAndContent">
							<rich:panelMenu id="#{module.id}_panelLeftMenu"
								styleClass="menuLeft" activeItem="#{module.activeSubModule.id}">
								<!-- LEFT MENU -->
								<c:forEach var="subModule" items="#{module.subModules}">
									<rich:panelMenuItem label="#{subModule.title}"
										id="#{subModule.id}" actionListener="#{module.processAction}"
										render="#{module.id}_panelContent" mode="ajax">
									</rich:panelMenuItem>
								</c:forEach>
							</rich:panelMenu>
							<rich:panel id="#{module.id}_panelContent"
								bodyClass="panelContent">
								<!--  MAIN CONTENT -->
								<util:selectComponent submodule="#{module.activeSubModule}" />
								<ft:trace />
							</rich:panel>
						</h:panelGrid>
					</c:if>
				</rich:tab>
			</c:forEach>
		</rich:tabPanel>
	</h:form>
	<div id="dialogShareForm" style="display: none;">
		<h:form id="shareForm">
			<forms:shareForm id="shareFormId" />
		</h:form>
	</div>
	<div id="dialogImportForm" style="display: none;">
		<h:form id="importForm">
			<forms:importForm id="importFormId" />
		</h:form>
	</div>
</ui:composition>
