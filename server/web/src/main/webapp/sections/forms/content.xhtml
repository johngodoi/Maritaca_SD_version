<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:util="http://java.sun.com/jsf/composite/components/util">
<h:form>
	<c:set target="#{manager}" property="activeModuleByString"
		value="#{param.m}" />
	<!-- TOP TABS -->
	<rich:tabPanel switchType="ajax" activeItem="#{manager.activeModule.id}">
		<c:forEach var="module" items="#{manager.enabledModules}">
			<!-- CREATE A NEW TOP TAB (MODULE) -->
			<rich:tab header="#{module.title}" id="#{module.id}">
				<c:set target="#{manager.activeModule}"
					property="activeSubModuleByString" value="#{param.sm}" />
				<!-- FOR EACH MODULE, CREATE A GRID PANEL FOR LEFT NAVIGATION BAR & CONTENT -->
				<h:panelGrid columns="2" columnClasses="cols,cols">
					<rich:panelMenu id="#{module.id}_panelLeftMenu" mode="ajax" activeItem="#{module.activeSubModule.id}">
						<!-- LEFT MENU -->
						<c:forEach var="subModule" items="#{module.subModules}">
							<rich:panelMenuItem label="#{subModule.title}"  id="#{subModule.id}" actionListener="#{module.processAction}"
								render="#{module.id}_panelContent">
							</rich:panelMenuItem>
						</c:forEach>
					</rich:panelMenu>
					<rich:panel id="#{module.id}_panelContent">
						<!--  MAIN CONTENT -->
						<util:selectComponent submodule="#{module.activeSubModule}"/>
					</rich:panel>
				</h:panelGrid>
			</rich:tab>
		</c:forEach>
	</rich:tabPanel>
</h:form>
</html>